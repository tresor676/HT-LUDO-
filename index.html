<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<title>Utilisateur</title>
<link rel="stylesheet" href="css/style.css">
</head>
<body>
<h2>Inscription Utilisateur</h2>
<input id="email" type="email" placeholder="Email">
<input id="password" type="password" placeholder="Mot de passe">
<button id="signup">S'inscrire</button>
  
<h2>Connexion Utilisateur</h2>
<input id="loginEmail" type="email" placeholder="Email">
<input id="loginPassword" type="password" placeholder="Mot de passe">
<button id="loginUser">Connexion</button>
<button id="loginAdmin">Connexion ADMIN</button>

<script type="module">
import { auth, db } from "./js/firebase.js";
import { createUserWithEmailAndPassword, signInWithEmailAndPassword } from 
"https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js";
import { doc, setDoc } from 
"https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";

// Signup utilisateur
signup.onclick = async () => {
  try {
    const userCred = await createUserWithEmailAndPassword(auth, email.value, password.value);
    await setDoc(doc(db, "users", userCred.user.uid), {
      email: email.value,
      role: "user",
      createdAt: new Date()
    });
    alert("Utilisateur créé !");
  } catch(e) { alert(e.message); }
};

// Login utilisateur
loginUser.onclick = () => {
  signInWithEmailAndPassword(auth, loginEmail.value, loginPassword.value)
    .then(() => alert("Connecté"))
    .catch(e => alert(e.message));
};
  //LoginAdmin
  loginAdmin.onclick = location.href='admin.html',
</script>
</body>
</html>
